version: 2

models:
  - name: mart_owner_performance
    description: Sales performance metrics by opportunity owner
    tests:
      - dbt_expectations.expect_table_row_count_to_be_between:
          min_value: 1
          max_value: 10000
    columns:
      - name: owner_id
        description: The unique identifier for the opportunity owner
        tests:
          - unique
          - not_null

  - name: mart_manager_performance
    description: Sales performance metrics rolled up to the manager level
    tests:
      - dbt_expectations.expect_table_row_count_to_be_between:
          min_value: 0
          max_value: 1000
    columns:
      - name: manager_id
        description: The unique identifier for the manager
        tests:
          - unique
          - not_null

  - name: mart_sales_snapshot
    description: Single-row KPI dashboard with current sales metrics
    tests:
      - dbt_expectations.expect_table_row_count_to_equal:
          value: 1
    columns:
      - name: snapshot_id
        description: Always 1, used as the primary key for this single-row table
        tests:
          - unique
          - not_null